<script>
  $(document).ready(function(e) { $('img[usemap]').rwdImageMaps(); });
  
  $(document).ready(function(){
    createGallery('our-story');
    createGallery('circle-materials');
  });
  
  
  
  
  function createGallery(galleryName) {
    var galleryContainer = '#' + galleryName + '-gallery-images';
    var leftArrow = '#' + galleryName + '-left-arrow';
    var rightArrow = '#' + galleryName + '-right-arrow';
    var firstItem = $(galleryContainer).find('.gallery-item.first');
    var lastItem = $(galleryContainer).find('.gallery-item.last');
    
    $(leftArrow).click(function(){
      var activeItem = $(galleryContainer + ' .gallery-item.active');
      if (activeItem.hasClass('first')){
        var prevItem = lastItem;
      } else {
        var prevItem = activeItem.prev('.gallery-item');
      }
      // Animation sequence goes here
      activeItem.removeClass('active');
      prevItem.addClass('active');
      prevItem.stop().animate({
        opacity: 1
      }, 400);
    });
    $(rightArrow).click(function(){
      var activeItem = $(galleryContainer + ' .gallery-item.active');
      if (activeItem.hasClass('last')) {
        var nextItem = firstItem;
      } else {
        var nextItem = activeItem.next('.gallery-item');
      }
      // Animation sequence goes here
      activeItem.removeClass('active');
      nextItem.addClass('active');
      nextItem.stop().animate({
        opacity: 1
      }, 400);
    });
  }
</script>