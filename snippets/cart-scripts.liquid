<script type='text/javascript'>
  
  $('.updates-quantity').focusout(updateQuantity(););
  
  function updateQuantity(){
    $('#quantity-update-submit').submit();
  }

/* Assign retargeting bucket based on first item in the cart. */  
  
{% assign first_product = cart.items[0].product %}
var tags = [];
{% for tag in first_product.tags %}
  tags.push("{{tag}}");
{% endfor %}
            
$(document).ready(assignBucket(tags));

function assignBucket(tags) {
  if (tags.indexOf("wayfarer classics") > -1 ) {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9866]});
  } else if (tags.indexOf("mirrorshades") > -1 ) {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9864]});
  } else if (tags.indexOf("neons") > -1 ) {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9865]});
  } else if (tags.indexOf("voyager classics") > -1 ) {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9863]});
  } else if (tags.indexOf("voyager neons") > -1 ) {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9862]});
  } else {
    if(!_rt_calls){ var _rt_calls = []; }
    _rt_calls.push({"type":"segment", "id":[9861]});
  }
}
</script>